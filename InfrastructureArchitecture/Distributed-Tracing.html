<!DOCTYPE html>
<html>
<head>
    <title>Infrastructure Architecture Distributed Tracing</title>
    <link rel="stylesheet" href="styles/site.css" type="text/css" />
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    
        <div id="main">
            <div id="main-header">
                <div id="breadcrumb-section">
                    <ol id="breadcrumbs">
                        <li>
                            <a href="index.html">Information Technology</a>
                        </li>
                        <li>
                            <a href="2.0-Architectures_451824369.html">2.0 Architectures</a>
                        </li>
                        <li>
                            <a href="451820182.html">Microservices &amp; Distributed System</a>
                        </li>
                        <li>
                            <a href="Microservice-Architecture_451820190.html">Microservice Architecture</a>
                        </li>
                    </ol>
                </div>
                <h1 id="title-heading" class="pagetitle">

                    Infrastructure Architecture Distributed Tracing

                </h1>
            </div>
            <div id="content" class="view">
                <h2>Context</h2>
                <p>
                    You have applied the 
                    <a href="https://microservices.io/patterns/microservices.html" style="text-decoration: none;" class="external-link" rel="nofollow">Microservice architecture pattern</a>. Requests often span multiple services. Each service handles a request by performing one or more operations, e.g. database queries, publishes messages, etc.
                </p>
                <h2>Problem</h2>
                <p>How to understand the behavior of an application and troubleshoot problems?</p>
                <h2>Forces</h2>
                <ul>
                    <li>External monitoring only tells you the overall response time and number of invocations - no insight into the individual operations</li>
                    <li>Any solution should have minimal runtime overhead</li>
                    <li>Log entries for a request are scattered across numerous logs</li>
                </ul>
                <h2>Solution</h2>
                <p>Instrument services with code that</p>
                <ul>
                    <li>Assigns each external request a unique external request id</li>
                    <li>Passes the external request id to all services that are involved in handling the request</li>
                    <li>
                        Includes the external request id in all 
                        <a style="text-decoration: none;" href="https://microservices.io/patterns/observability/application-logging.html" class="external-link" rel="nofollow">log messages</a>
                    </li>
                    <li>Records information (e.g. start time, end time) about the requests and operations performed when handling a external request in a centralized service</li>
                </ul>
                <p>
                    This instrumentation might be part of the functionality provided by a 
                    <a style="text-decoration: none;" href="https://microservices.io/patterns/microservice-chassis.html" class="external-link" rel="nofollow">Microservice Chassis framework</a>.
                </p>
                <h2>Resulting Context</h2>
                <p>This pattern has the following benefits:</p>
                <ul>
                    <li>It provides useful insight into the behavior of the system including the sources of latency</li>
                    <li>
                        It enables developers to see how an individual request is handled by searching across 
                        <a style="text-decoration: none;" href="https://microservices.io/patterns/observability/application-logging.html" class="external-link" rel="nofollow">aggregated logs</a> for its external request id
                    </li>
                </ul>
                <p>This pattern has the following issues:</p>
                <ul>
                    <li>Aggregating and storing traces can require significant infrastructure</li>
                </ul>
                <b>Related Patterns</b>
                <ul>
                    <li>
                        <a href="https://microservices.io/patterns/observability/application-logging.html" style="text-decoration: none;" class="external-link" rel="nofollow">Log aggregation</a> - the external request id is included in each log message
                    </li>
                </ul>
            </div>
    </div>
    <div id="footer" role="contentinfo">
        <section class="footer-body">
        </section>
    </div>
</body>
</html>
